/*-----------------------------------------------------------------------------
/ 
/	Timer related functions.
/
/------------------------------------------------------------------------------
/   ihsan Kehribar - 2013 
/----------------------------------------------------------------------------*/
#include "hal_timer.h"
/*---------------------------------------------------------------------------*/
void timer1_init(void)
{
    TCCR1A=(0<<COM1B1)|(0<<COM1B0)|(0<<WGM11);
     
    // TCCR1B=(1<<CS12)|(1<<CS10)|(1<<WGM12)|(0<<WGM13); // prescaler -> 1024
    
    TCCR1B=(1<<CS12)|(0<<CS10)|(1<<WGM12)|(0<<WGM13); // prescaler -> 256
    
    TIMSK1=(1<<OCIE1A);

    // 8000000/1024 = 7812.5 hz

    // 8000000/256 = 31250 hz

    OCR1A=3125; // 100ms @ 31250 Hz
}
/*---------------------------------------------------------------------------*/
